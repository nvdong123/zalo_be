# Crontab configuration for Hotel Management Backend
# Add this to your crontab with: sudo crontab -e

# Health check every 5 minutes
*/5 * * * * /var/www/hotel-backend/backend/health_check.sh >> /var/log/hotel-backend/cron.log 2>&1

# Database backup daily at 2 AM
0 2 * * * /var/www/hotel-backend/backend/backup.sh >> /var/log/hotel-backend/backup.log 2>&1

# Clean old log files weekly (keep 30 days)
0 3 * * 0 find /var/log/hotel-backend/ -name "*.log" -mtime +30 -delete

# Restart service weekly on Sunday at 3 AM (optional maintenance)
# 0 3 * * 0 /bin/systemctl restart hotel-backend

# SSL certificate renewal check (Let's Encrypt)
0 12 * * * /usr/bin/certbot renew --quiet --no-self-upgrade

# System updates check (optional - be careful with auto-updates)
# 0 4 * * 1 apt update && apt list --upgradable

# Monitor disk space and send alert if > 85%
0 */6 * * * df -h / | awk 'NR==2 {if($5+0 > 85) print "Disk usage alert: "$5" on '$(hostname)'"}'
